# System Architecture & Flow Diagrams

This document explains how all the pieces of your project work together.

---

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      USER'S BROWSER                         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           FRONTEND (React App)                     â”‚    â”‚
â”‚  â”‚         Hosted on Netlify                          â”‚    â”‚
â”‚  â”‚  https://your-app.netlify.app                      â”‚    â”‚
â”‚  â”‚                                                     â”‚    â”‚
â”‚  â”‚  â€¢ Sign Up Page   (SignUp.js)                      â”‚    â”‚
â”‚  â”‚  â€¢ Sign In Page   (SignIn.js)                      â”‚    â”‚
â”‚  â”‚  â€¢ Dashboard      (Dashboard.js)                   â”‚    â”‚
â”‚  â”‚  â€¢ API Client     (auth.js)                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                    â”‚                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ HTTP Requests (Axios)
                     â”‚ POST /api/auth/signup
                     â”‚ POST /api/auth/signin
                     â”‚ GET  /api/auth/verify
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BACKEND SERVER (Express.js)                    â”‚
â”‚           Hosted on Render                                  â”‚
â”‚  https://your-backend.onrender.com                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Routes (routes/auth.js)                        â”‚       â”‚
â”‚  â”‚  â€¢ POST /api/auth/signup  â”€â”€â–º Create user       â”‚       â”‚
â”‚  â”‚  â€¢ POST /api/auth/signin  â”€â”€â–º Login user        â”‚       â”‚
â”‚  â”‚  â€¢ GET  /api/auth/verify  â”€â”€â–º Verify token      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                  â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Middleware (middleware/auth.js)                â”‚       â”‚
â”‚  â”‚  â€¢ Verify JWT tokens                            â”‚       â”‚
â”‚  â”‚  â€¢ Protect routes                               â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                  â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Models (models/User.js)                        â”‚       â”‚
â”‚  â”‚  â€¢ User schema                                  â”‚       â”‚
â”‚  â”‚  â€¢ Password hashing (bcrypt)                    â”‚       â”‚
â”‚  â”‚  â€¢ Password comparison                          â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                  â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚ MongoDB Queries
                   â”‚ â€¢ Save user
                   â”‚ â€¢ Find user
                   â”‚ â€¢ Update user
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         DATABASE (MongoDB Atlas)                            â”‚
â”‚         Hosted on MongoDB Cloud                             â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Database: capstone                             â”‚       â”‚
â”‚  â”‚                                                 â”‚       â”‚
â”‚  â”‚  Collection: users                              â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚       â”‚
â”‚  â”‚  â”‚ Document 1:                         â”‚       â”‚       â”‚
â”‚  â”‚  â”‚  _id: ObjectId("...")               â”‚       â”‚       â”‚
â”‚  â”‚  â”‚  name: "John Doe"                   â”‚       â”‚       â”‚
â”‚  â”‚  â”‚  email: "john@example.com"          â”‚       â”‚       â”‚
â”‚  â”‚  â”‚  password: "$2a$10$..." (HASHED)    â”‚       â”‚       â”‚
â”‚  â”‚  â”‚  createdAt: 2024-01-15T...          â”‚       â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚       â”‚
â”‚  â”‚                                                 â”‚       â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚       â”‚
â”‚  â”‚  â”‚ Document 2: ...                     â”‚       â”‚       â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Sign Up Flow

```
USER                 FRONTEND                BACKEND                DATABASE
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚  Fills form          â”‚                       â”‚                       â”‚
 â”‚  (name, email, pwd)  â”‚                       â”‚                       â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚  Clicks "Sign Up"    â”‚                       â”‚                       â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚  POST /api/auth/signupâ”‚                       â”‚
 â”‚                      â”‚  { name, email, pwd } â”‚                       â”‚
 â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Check if email existsâ”‚
 â”‚                      â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Email doesn't exist  â”‚
 â”‚                      â”‚                       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Hash password        â”‚
 â”‚                      â”‚                       â”‚  bcrypt.hash(pwd, 10) â”‚
 â”‚                      â”‚                       â”‚  â†’ "$2a$10$xxxxx"     â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Save user            â”‚
 â”‚                      â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  User saved âœ“         â”‚
 â”‚                      â”‚                       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Generate JWT token   â”‚
 â”‚                      â”‚                       â”‚  jwt.sign({id}, KEY)  â”‚
 â”‚                      â”‚                       â”‚  â†’ "eyJhbGc..."       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚  { token, user }      â”‚                       â”‚
 â”‚                      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚  Store token          â”‚                       â”‚
 â”‚                      â”‚  localStorage.set()   â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚  Redirect to         â”‚                       â”‚                       â”‚
 â”‚  Dashboard           â”‚                       â”‚                       â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
```

---

## ğŸ”‘ Sign In Flow

```
USER                 FRONTEND                BACKEND                DATABASE
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚  Enters credentials  â”‚                       â”‚                       â”‚
 â”‚  (email, password)   â”‚                       â”‚                       â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚  Clicks "Sign In"    â”‚                       â”‚                       â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚  POST /api/auth/signinâ”‚                       â”‚
 â”‚                      â”‚  { email, password }  â”‚                       â”‚
 â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Find user by email   â”‚
 â”‚                      â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Return user          â”‚
 â”‚                      â”‚                       â”‚  (with hashed pwd)    â”‚
 â”‚                      â”‚                       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Compare passwords    â”‚
 â”‚                      â”‚                       â”‚  bcrypt.compare()     â”‚
 â”‚                      â”‚                       â”‚  input vs stored hash â”‚
 â”‚                      â”‚                       â”‚  â†’ Match âœ“            â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Generate JWT token   â”‚
 â”‚                      â”‚                       â”‚  jwt.sign({id}, KEY)  â”‚
 â”‚                      â”‚                       â”‚  â†’ "eyJhbGc..."       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚  { token, user }      â”‚                       â”‚
 â”‚                      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚  Store token          â”‚                       â”‚
 â”‚                      â”‚  localStorage.set()   â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚  Redirect to         â”‚                       â”‚                       â”‚
 â”‚  Dashboard           â”‚                       â”‚                       â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
```

---

## ğŸ›¡ï¸ Protected Route Access (Dashboard)

```
USER                 FRONTEND                BACKEND                DATABASE
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚  Visits /dashboard   â”‚                       â”‚                       â”‚
 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚  Get token from       â”‚                       â”‚
 â”‚                      â”‚  localStorage         â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚  GET /api/auth/verify â”‚                       â”‚
 â”‚                      â”‚  Header:              â”‚                       â”‚
 â”‚                      â”‚  Authorization:       â”‚                       â”‚
 â”‚                      â”‚  Bearer eyJhbGc...    â”‚                       â”‚
 â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Verify JWT token     â”‚
 â”‚                      â”‚                       â”‚  jwt.verify(token)    â”‚
 â”‚                      â”‚                       â”‚  â†’ { id: "..." }      â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Find user by ID      â”‚
 â”‚                      â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚  Return user          â”‚
 â”‚                      â”‚                       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚                      â”‚  { valid: true,       â”‚                       â”‚
 â”‚                      â”‚    user: {...} }      â”‚                       â”‚
 â”‚                      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
 â”‚  Show Dashboard      â”‚                       â”‚                       â”‚
 â”‚  with user info      â”‚                       â”‚                       â”‚
 â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                       â”‚                       â”‚
 â”‚                      â”‚                       â”‚                       â”‚
```

---

## ğŸ”’ Password Hashing Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER ENTERS PASSWORD: "password123"                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BCRYPT GENERATES SALT (Random String)                  â”‚
â”‚  Salt: "$2a$10$vI8aWBnW3fID.ZQ4/zo1G."                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BCRYPT COMBINES PASSWORD + SALT                        â”‚
â”‚  Input: "password123" + "$2a$10$vI8aWBnW3fID.ZQ4/zo1G." â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  BCRYPT HASHES (10 rounds of encryption)                â”‚
â”‚  Computationally expensive - takes time                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FINAL HASH (Stored in Database)                        â”‚
â”‚  "$2a$10$vI8aWBnW3fID.ZQ4/zo1G.q1lRps.9cGLcZEiGDMVr..." â”‚
â”‚                                                          â”‚
â”‚  Structure:                                              â”‚
â”‚  $2a$     = bcrypt algorithm                            â”‚
â”‚  10$      = number of rounds (2^10 = 1024 iterations)   â”‚
â”‚  vI8a...G = salt                                         â”‚
â”‚  q1lR...r = encrypted password                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Properties:
âœ“ Same password + different salt = different hash
âœ“ Impossible to reverse (one-way function)
âœ“ Same password with same salt = same hash (for comparison)
âœ“ Computationally expensive to brute force
```

---

## ğŸŸï¸ JWT Token Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JWT TOKEN: eyJhbGciOi...   .  eyJpZCI6I...  .  SflKxwR...â”‚
â”‚             â””â”€â”€HEADERâ”€â”€â”˜       â””â”€PAYLOADâ”€â”€â”˜     â””â”€SIGNâ”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HEADER (Algorithm & Token Type)                        â”‚
â”‚                                                         â”‚
â”‚  {                                                      â”‚
â”‚    "alg": "HS256",      â† HMAC SHA-256 algorithm       â”‚
â”‚    "typ": "JWT"         â† Token type                   â”‚
â”‚  }                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Base64 encoded
                         â”‚
                         â–¼
                    eyJhbGciOi...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PAYLOAD (Claims/Data)                                  â”‚
â”‚                                                         â”‚
â”‚  {                                                      â”‚
â”‚    "id": "507f1f77bcf86cd799439011",  â† User ID        â”‚
â”‚    "iat": 1699564800,                  â† Issued At     â”‚
â”‚    "exp": 1699651200                   â† Expires At    â”‚
â”‚  }                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Base64 encoded
                         â”‚
                         â–¼
                    eyJpZCI6I...

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SIGNATURE (Verification)                               â”‚
â”‚                                                         â”‚
â”‚  HMACSHA256(                                            â”‚
â”‚    base64UrlEncode(header) + "." +                      â”‚
â”‚    base64UrlEncode(payload),                            â”‚
â”‚    JWT_SECRET                â† Your secret key          â”‚
â”‚  )                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Encrypted
                         â”‚
                         â–¼
                    SflKxwR...

Flow:
1. Server generates token on login
2. Client stores token (localStorage)
3. Client sends token with each request
4. Server verifies token signature
5. Server decodes payload to get user ID
6. Server allows/denies access based on validity
```

---

## ğŸŒ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YOUR GITHUB REPOSITORY                   â”‚
â”‚              https://github.com/you/ap-capstone             â”‚
â”‚                                                             â”‚
â”‚  â€¢ All source code                                          â”‚
â”‚  â€¢ Documentation                                            â”‚
â”‚  â€¢ Configuration files                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                 â”‚
           â”‚ Connected                       â”‚ Connected
           â”‚                                 â”‚
           â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NETLIFY            â”‚           â”‚   RENDER             â”‚
â”‚   (Frontend)         â”‚           â”‚   (Backend)          â”‚
â”‚                      â”‚           â”‚                      â”‚
â”‚  Builds React app    â”‚           â”‚  Runs Node.js server â”‚
â”‚  Serves static files â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Executes API logic  â”‚
â”‚  Handles routing     â”‚   CORS    â”‚  Manages database    â”‚
â”‚                      â”‚           â”‚                      â”‚
â”‚  your-app.netlify    â”‚           â”‚  your-backend        â”‚
â”‚  .app                â”‚           â”‚  .onrender.com       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                   â”‚
           â”‚                                   â”‚ Queries
           â”‚                                   â”‚
           â”‚                                   â–¼
           â”‚                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                       â”‚  MONGODB ATLAS       â”‚
           â”‚                       â”‚  (Database)          â”‚
           â”‚                       â”‚                      â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚  Stores user data    â”‚
             Shows data            â”‚  Manages collections â”‚
             to user               â”‚  Provides security   â”‚
                                   â”‚                      â”‚
                                   â”‚  cluster.mongodb.net â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Environment Variables Flow:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Netlify:
  REACT_APP_API_URL â†’ Points to Render backend URL

Render:
  MONGODB_URI â†’ Connects to MongoDB Atlas
  JWT_SECRET â†’ Signs and verifies tokens
  FRONTEND_URL â†’ Configures CORS for Netlify
  NODE_ENV â†’ production
  PORT â†’ 5000
```

---

## ğŸ”„ Complete User Journey

```
1. USER OPENS SITE
   â”‚
   â”œâ”€â–º https://your-app.netlify.app
   â”‚
   â””â”€â–º Sees Sign In page (default route)

2. USER CLICKS "SIGN UP"
   â”‚
   â”œâ”€â–º Routes to /signup
   â”‚
   â”œâ”€â–º Fills in form:
   â”‚   â€¢ Name
   â”‚   â€¢ Email
   â”‚   â€¢ Password (min 6 chars)
   â”‚
   â”œâ”€â–º Frontend validates
   â”‚
   â”œâ”€â–º Sends POST to backend
   â”‚
   â”œâ”€â–º Backend validates
   â”‚
   â”œâ”€â–º Backend checks for existing email
   â”‚
   â”œâ”€â–º Backend hashes password
   â”‚
   â”œâ”€â–º Backend saves to MongoDB
   â”‚
   â”œâ”€â–º Backend generates JWT token
   â”‚
   â”œâ”€â–º Frontend stores token
   â”‚
   â””â”€â–º Redirects to /dashboard

3. USER SEES DASHBOARD
   â”‚
   â”œâ”€â–º Shows user information:
   â”‚   â€¢ Name
   â”‚   â€¢ Email
   â”‚   â€¢ User ID
   â”‚   â€¢ Account creation date
   â”‚
   â”œâ”€â–º Displays JWT token
   â”‚
   â””â”€â–º Button to verify on jwt.io

4. USER CLICKS "VERIFY TOKEN"
   â”‚
   â”œâ”€â–º Opens jwt.io in new tab
   â”‚
   â”œâ”€â–º Token is pre-loaded
   â”‚
   â”œâ”€â–º Shows decoded header
   â”‚
   â”œâ”€â–º Shows decoded payload
   â”‚
   â””â”€â–º Shows signature verification

5. USER LOGS OUT
   â”‚
   â”œâ”€â–º Removes token from localStorage
   â”‚
   â””â”€â–º Redirects to /signin

6. USER SIGNS IN AGAIN
   â”‚
   â”œâ”€â–º Enters email & password
   â”‚
   â”œâ”€â–º Backend verifies credentials
   â”‚
   â”œâ”€â–º Backend compares hashed passwords
   â”‚
   â”œâ”€â–º Backend generates new JWT token
   â”‚
   â”œâ”€â–º Frontend stores new token
   â”‚
   â””â”€â–º Redirects to /dashboard

7. USER CLOSES BROWSER
   â”‚
   â””â”€â–º Token remains in localStorage
       (valid for 24 hours)

8. USER RETURNS LATER
   â”‚
   â”œâ”€â–º Opens site
   â”‚
   â”œâ”€â–º Frontend checks for token
   â”‚
   â”œâ”€â–º Sends token to backend for verification
   â”‚
   â”œâ”€â–º If valid: Show dashboard
   â”‚
   â””â”€â–º If invalid/expired: Show sign in
```

---

## ğŸ“Š Data Flow Summary

```
SIGN UP:
UserInput â†’ Frontend â†’ Backend â†’ Hash Password â†’ MongoDB â†’ JWT Token â†’ localStorage â†’ Dashboard

SIGN IN:
Credentials â†’ Frontend â†’ Backend â†’ Find User â†’ Compare Hash â†’ JWT Token â†’ localStorage â†’ Dashboard

PROTECTED ROUTE:
Dashboard â†’ Get Token â†’ Backend â†’ Verify Token â†’ Find User â†’ Return Data â†’ Display

LOGOUT:
Button â†’ Remove Token â†’ localStorage â†’ Redirect â†’ Sign In
```

---

## ğŸ” Security Layers

```
Layer 1: Input Validation (Frontend)
         â””â”€â–º Checks: email format, password length, required fields

Layer 2: Input Validation (Backend)
         â””â”€â–º Validates: data types, constraints, SQL injection

Layer 3: Password Hashing
         â””â”€â–º bcrypt with 10 salt rounds
         â””â”€â–º Irreversible encryption

Layer 4: JWT Authentication
         â””â”€â–º Signed tokens
         â””â”€â–º Expiration time (24 hours)
         â””â”€â–º Secret key verification

Layer 5: CORS Protection
         â””â”€â–º Only allows requests from frontend URL
         â””â”€â–º Prevents unauthorized access

Layer 6: Environment Variables
         â””â”€â–º Secrets not in code
         â””â”€â–º Different per environment

Layer 7: HTTPS (Production)
         â””â”€â–º All data encrypted in transit
         â””â”€â–º Provided by Netlify & Render
```

---

This architecture ensures:
âœ… Security - Passwords hashed, tokens verified, CORS protected
âœ… Scalability - Cloud hosting, can handle many users
âœ… Reliability - Professional hosting services
âœ… Maintainability - Clean code, separation of concerns
âœ… Best Practices - Industry-standard patterns
